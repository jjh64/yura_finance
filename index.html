<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>유라의 가계부 (Yura's Piggy Bank)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="bg-blue-50 text-gray-800">
  <div class="container mx-auto p-4 md:p-8 max-w-6xl">
    <header class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-bold text-blue-600">🐷 유라의 가계부 🐷</h1>
      <p class="text-gray-500 mt-2">오늘의 똑똑한 선택이 내일의 멋진 유라를 만든다!</p>
    </header>

    <!-- 요약 -->
    <section class="bg-white p-6 rounded-2xl shadow-lg mb-8 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
      <div id="balanceDisplayContainer" class="cursor-pointer" title="초기 잔액 설정하기">
        <h2 class="text-sm font-bold text-gray-500">현재 잔액</h2>
        <p id="balance" class="text-2xl font-bold text-blue-600">$0.00</p>
      </div>
      <div>
        <h2 class="text-sm font-bold text-gray-500">소비 점수</h2>
        <p id="evaluationScore" class="text-2xl font-bold text-green-500">0</p>
      </div>
      <div>
        <h2 class="text-sm font-bold text-gray-500">은행 예금</h2>
        <p id="bankBalance" class="text-2xl font-bold text-indigo-500">$0.00</p>
      </div>
      <div>
        <h2 class="text-sm font-bold text-gray-500">총 기부액</h2>
        <p id="totalDonation" class="text-2xl font-bold text-pink-500">$0.00</p>
      </div>
    </section>

    <main class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- 입력/관리 패널 -->
      <div class="bg-white p-6 rounded-2xl shadow-lg">
        <!-- 탭 -->
        <div class="flex gap-2 mb-4">
          <button id="goalTab" type="button" class="px-3 py-2 rounded-lg bg-gray-100">🎯 목표</button>
          <button id="incomeTab" type="button" class="px-3 py-2 rounded-lg bg-gray-100">💰 수입</button>
          <button id="expenseTab" type="button" class="px-3 py-2 rounded-lg bg-gray-100">💸 지출</button>
        </div>

        <!-- 목표 -->
        <div id="goalSection">
          <form id="goalForm">
            <div class="mb-3">
              <label class="font-bold" for="goalItem">목표 항목</label>
              <input id="goalItem" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <div class="mb-3">
              <label class="font-bold" for="goalAmount">목표 금액</label>
              <input id="goalAmount" type="number" step="0.01" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <div class="mb-4">
              <label class="font-bold" for="goalDate">목표 날짜</label>
              <input id="goalDate" type="date" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <button class="w-full bg-green-500 text-white font-bold p-3 rounded-lg hover:bg-green-600">목표 추가</button>
          </form>
          <div class="mt-4">
            <h4 class="text-lg font-bold text-center text-green-700 mb-2">📒 목표 로그</h4>
            <ul id="goalLogsList" class="space-y-2"></ul>
          </div>
          <div id="goalList" class="mt-4 space-y-2"></div>
        </div>

        <!-- 수입 -->
        <div id="incomeSection" class="hidden">
          <form id="incomeForm">
            <div class="mb-4">
              <label class="font-bold" for="incomeSource">출처</label>
              <input id="incomeSource" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <div class="mb-4">
              <label class="font-bold" for="incomeAmount">금액</label>
              <input id="incomeAmount" type="number" step="0.01" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <button class="w-full bg-blue-500 text-white font-bold p-3 rounded-lg hover:bg-blue-600">수입 기록</button>
          </form>
        </div>

        <!-- 지출 -->
        <div id="expenseSection" class="hidden">
          <form id="expenseForm">
            <div class="mb-4">
              <label class="font-bold" for="expenseSource">항목</label>
              <input id="expenseSource" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <div class="mb-4">
              <label class="font-bold" for="expenseAmount">금액</label>
              <input id="expenseAmount" type="number" step="0.01" class="w-full p-2 border rounded-lg mt-1" required/>
            </div>
            <div class="mb-4">
              <label class="font-bold">지출 평가</label>
              <div class="flex justify-around mt-2">
                <label><input type="radio" name="evaluation" value="3" checked class="mr-1"> 계획</label>
                <label><input type="radio" name="evaluation" value="0" class="mr-1"> 고정</label>
                <label><input type="radio" name="evaluation" value="-3" class="mr-1"> 충동</label>
              </div>
            </div>
            <button class="w-full bg-red-500 text-white font-bold p-3 rounded-lg hover:bg-red-600">지출 기록</button>
          </form>

          <hr class="my-6 border-t-2 border-dashed border-gray-200">

          <div id="donationSection" class="mt-4">
            <h3 class="text-xl font-bold mb-4 text-center text-pink-600">💖 기부</h3>
            <div class="mb-4">
              <label class="font-bold" for="donationSource">기부처</label>
              <input id="donationSource" class="w-full p-2 border rounded-lg mt-1"/>
            </div>
            <div class="mb-4">
              <label class="font-bold" for="donationAmount">금액</label>
              <input id="donationAmount" type="number" step="0.01" class="w-full p-2 border rounded-lg mt-1"/>
            </div>
            <button id="addDonationButton" type="button" class="w-full bg-pink-500 text-white font-bold p-3 rounded-lg hover:bg-pink-600">기부 기록</button>
          </div>
        </div>
      </div>

      <!-- 은행/그래프 패널 -->
      <div class="bg-white p-6 rounded-2xl shadow-lg">
        <h3 class="text-xl font-bold mb-4 text-center text-indigo-600">🏦 저축 은행</h3>
        <div class="bg-indigo-50 p-4 rounded-lg">
          <p class="text-center">단리 1%/일</p>
          <div class="my-4">
            <label for="depositAmount" class="font-bold">맡길 금액</label>
            <input id="depositAmount" type="number" step="0.01" class="w-full p-2 border rounded-lg mt-1" placeholder="예: 50.00">
          </div>
          <div class="mb-4">
            <label for="depositPeriod" class="font-bold">맡길 기간(일)</label>
            <input id="depositPeriod" type="number" min="1" step="1" inputmode="numeric" pattern="[0-9]*" class="w-full p-2 border rounded-lg mt-1" placeholder="예: 30">
          </div>
          <p id="interestPreview" class="text-center mb-4 font-bold text-indigo-600 min-h-[1.5rem]"></p>
          <button id="depositButton" class="w-full bg-indigo-500 text-white font-bold p-3 rounded-lg hover:bg-indigo-600">예금하기</button>
        </div>
        <div id="depositList" class="mt-4 space-y-2"></div>

        <section class="mt-8">
          <div class="flex justify-center border-b mb-4">
            <button id="listViewTab" type="button" class="flex-1 p-2 font-bold focus:outline-none">📋 목록</button>
            <button id="graphViewTab" type="button" class="flex-1 p-2 font-bold focus:outline-none">📊 그래프</button>
          </div>
          <div id="listViewContainer">
            <h3 class="text-xl font-bold mb-4 text-center">💰 돈의 흐름</h3>
            <div class="grid grid-cols-3 gap-4">
              <div>
                <h4 class="text-lg font-bold text-center text-blue-600 mb-2">수입</h4>
                <ul id="incomeList" class="space-y-2"></ul>
                <div class="mt-2 pt-2 border-t font-bold text-right">총 수입: <span id="totalIncome" class="text-blue-600">$0.00</span></div>
              </div>
              <div>
                <h4 class="text-lg font-bold text-center text-red-600 mb-2">지출/기부</h4>
                <ul id="expenseList" class="space-y-2"></ul>
                <div class="mt-2 pt-2 border-t font-bold text-right">총 지출: <span id="totalExpense" class="text-red-600">$0.00</span></div>
              </div>
              <div class="flex flex-col">
                <h4 class="text-lg font-bold text-center text-gray-700 mb-2">남은 돈</h4>
                <div id="balanceSheet" class="flex flex-col items-center justify-center flex-grow bg-gray-100 rounded-lg">
                  <p id="balanceSheetAmount" class="text-2xl font-bold text-purple-600">$0.00</p>
                </div>
              </div>
            </div>
          </div>
          <div id="graphViewContainer" class="hidden">
            <h3 class="text-xl font-bold mb-4 text-center">📈 그래프</h3>
            <div class="h-80"><canvas id="transactionChart"></canvas></div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <!-- 비밀번호/초기잔액 모달 (필요 시 표시) -->
  <div id="passwordModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50"></div>
  <div id="amountModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h
